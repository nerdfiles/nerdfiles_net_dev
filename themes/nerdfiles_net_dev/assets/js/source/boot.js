// Generated by CoffeeScript 1.7.1
(function() {
  if (window.nerds == null) {
    window.nerds = {};
  }

  nerds.lastfm_recent_tracks = function() {
    return $.ajax('/__/recent-tracks/', {
      type: 'GET',
      dataType: 'json',
      cache: true,
      error: function(jqXHR, textStatus, errorThrown) {
        var body$;
        body$ = $("body");
        return body$.addClass("err-" + textStatus);
      },
      complete: function(data) {
        var d, lastfm_recent_tracks$;
        d = $.parseJSON(data.responseText);
        lastfm_recent_tracks$ = $('#lastfm_recent_tracks');
        return lastfm_recent_tracks$.attr('title', d.join('\n â€” \n'));
      }
    });
  };

  nerds.twitter_recent_tweets = function() {
    return $.ajax('/__/recent-tweets/', {
      type: 'GET',
      dataType: 'json',
      cache: true,
      error: function(jqXHR, textStatus, errorThrown) {
        var body$;
        body$ = $('body');
        return body$.addClass('err-#{textStatus}');
      },
      complete: function(data) {
        var d, twitter_recent_tweets$;
        d = $.parseJSON(data.responseText);
        twitter_recent_tweets$ = $('#twitter_recent_tweets');
        return $.each(d, function(k, v) {
          return twitter_recent_tweets$.append('<li>' + v + '</li>');
        });
      }
    });
  };

  nerds.anchors_scroll = function() {
    return $('a[href^="#"]').click(function(e) {
      var $el, $target, el, href, scope, target;
      el = this;
      $el = $(el);
      href = $el.prop('href');
      target = href.split('/')[href.split('/').length - 1];
      $target = $(target);
      scope = 'html,body';
      $(scope).animate({
        'scrollTop': $target.offset().top
      }, 750, 'swing', function() {});
      return e.preventDefault();
    });
  };

  nerds.anchors_external = function() {
    return $('a[rel="external"]').click(function(e) {
      var $el, el;
      el = this;
      $el = $(el);
      window.open($el.prop('href'), $el.prop('title'));
      return e.preventDefault();
    });
  };

  nerds.init = function() {
    nerds.anchors_scroll();
    nerds.anchors_external();
    return nerds.lastfm_recent_tracks();
  };

  $(document).ready(function() {
    return nerds.init();
  });

}).call(this);
